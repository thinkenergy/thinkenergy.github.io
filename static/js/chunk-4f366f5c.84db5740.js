/*!
 *  build: vue-admin-beautiful 
 *  copyright: chuzhixin 1204505056@qq.com 
 *  time: 2021-8-30 11:41:09
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f366f5c"],{"1e08":function(e,t,a){},"9ed6":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-index"},[a("div",{staticClass:"login-wrapper"},[a("div",{staticClass:"left-top-logo"}),a("div",{staticClass:"container"},[a("div",{staticClass:"container-box"},[a("div",{staticClass:"bg-img"},[a("div",{staticStyle:{"text-align":"center"}},[a("p",{staticClass:"text1"},[e._v(e._s(e.title))]),a("p",[e._v(e._s("v"+e.version))])])]),a("el-form",{ref:"form",staticClass:"login-form",attrs:{model:e.form,rules:e.rules}},[a("h2",{staticClass:"title"},[e._v("用户登录")]),a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{placeholder:"请输入用户名",tabindex:"1",type:"text"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username","string"===typeof t?t.trim():t)},expression:"form.username"}},[a("span",{staticClass:"svg-container svg-container-admin",attrs:{slot:"prefix"},slot:"prefix"},[a("vab-icon",{attrs:{icon:["fas","user"]}})],1)])],1),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,tabindex:"2",placeholder:"请输入密码","show-password":""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password","string"===typeof t?t.trim():t)},expression:"form.password"}},[a("span",{staticClass:"svg-container",attrs:{slot:"prefix"},slot:"prefix"},[a("vab-icon",{attrs:{icon:["fas","lock"]}})],1)])],1),e.captchaFlag?a("el-form-item",{attrs:{prop:"captcha"}},[a("el-input",{ref:"captcha",staticStyle:{width:"calc(100% - 150px)"},attrs:{placeholder:"请输入验证码",name:"captcha",type:"text",tabindex:"1",autocomplete:"on",maxlength:"10"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.form.captcha,callback:function(t){e.$set(e.form,"captcha","string"===typeof t?t.trim():t)},expression:"form.captcha"}},[a("span",{staticClass:"svg-container",attrs:{slot:"prefix"},slot:"prefix"},[a("i",{staticClass:"el-icon-warning",staticStyle:{display:"inline-block","font-size":"20px"}})])]),a("img",{staticClass:"captcha",staticStyle:{float:"right",width:"150px"},attrs:{title:"看不清，换一张",alt:"验证码",src:e.captchaImg},on:{click:e.getCaptcha}})],1):e._e(),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"login-btn",attrs:{loading:e.loading,type:"primary"},on:{click:e.handleLogin}},[e._v(" 登 录 ")])],1)],1)],1),a("div",{staticClass:"screen"},[e._v(" 当前分辨率："+e._s(e.screen.width+"*"+e.screen.height)+" ，请调整页面缩放比"+e._s(e.zoomNumer)+"%达到最优显示。 ")])])])])},i=[],n=a("c964"),o=(a("96cf"),a("ed08")),s=a("c24f"),c=a("61f7"),l={name:"Login",directives:{focus:{inserted:function(e){e.querySelector("input").focus()}}},data:function(){var e=function(e,t,a){Object(c["isNull"])(t)?a(new Error("用户名不能为空")):a()},t=function(e,t,a){Object(c["isNull"])(t)?a(new Error("请输入密码")):Object(c["isPassword"])(t)?a():a(new Error("密码至少包含大小写字母，数字，且不少于6位"))},a=function(e,t,a){Object(c["isNull"])(t)?a(new Error("验证码不能为空")):a()},r=Object(o["uuid"])();return{version:this.$baseVersion,nodeEnv:"production",title:this.$baseTitle,form:{username:"system",password:"Aa123456",captcha:"",uuid:r},rules:{username:[{required:!0,trigger:"blur",validator:e}],password:[{required:!0,trigger:"blur",validator:t}],captcha:[{required:!0,trigger:"blur",validator:a}]},captchaFlag:!1,loading:!1,passwordType:"password",redirect:void 0,captchaImg:Object(s["captcha"])(r),detectZoomNumber:100,screen:1920,zoomNumer:0}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect||"/"},immediate:!0}},created:function(){document.body.style.overflow="hidden"},beforeDestroy:function(){document.body.style.overflow="auto"},mounted:function(){var e=this;window.onresize=function(){e.getSreen()},this.getSreen()},methods:{getSreen:function(){this.detectZoomNumber=this.detectZoom();var e=window.screen;this.screen=e,this.zoomNumer=parseInt(e.width/1920*100)},detectZoom:function(){var e=0,t=window.screen,a=navigator.userAgent.toLowerCase();return void 0!==window.devicePixelRatio?e=window.devicePixelRatio:~a.indexOf("msie")?t.deviceXDPI&&t.logicalXDPI&&(e=t.deviceXDPI/t.logicalXDPI):void 0!==window.outerWidth&&void 0!==window.innerWidth&&(e=window.outerWidth/window.innerWidth),e&&(e=Math.round(100*e)),e},getCaptcha:function(){this.captchaImg=Object(s["captcha"])(this.form.uuid)},handleLogin:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;e.loading=!0,e.$store.dispatch("user/login",e.form).then(Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return"/404"===e.redirect||"/401"===e.redirect?"/":e.redirect,e.$router.push("/").catch((function(){})),e.loading=!1,t.next=5,Object(s["getTenantInfo"])();case 5:a=t.sent,r=a.data,r&&r!=={}&&(localStorage.setItem("sysName",res.data.sysName||""),localStorage.setItem("leftLogo",res.data.leftLogo||""));case 8:case"end":return t.stop()}}),t)})))).catch((function(){e.$store.dispatch("user/getSlipCount",e.form).then((function(t){e.loading=!1;var a=t.data;!Object(c["isNull"])(a)&&a.curr>=a.base&&(e.captchaFlag=!0)})).catch((function(){e.loading=!1}))}))}))}}},d=l,u=(a("aee6"),a("2877")),p=Object(u["a"])(d,r,i,!1,null,"63b64e19",null);t["default"]=p.exports},aee6:function(e,t,a){"use strict";a("1e08")}}]);